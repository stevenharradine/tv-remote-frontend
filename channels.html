<!doctype html5>
<html>
	<head>
		<title>TV Remote</title>
		<link rel="stylesheet" type="text/css" href="style.css" />
		<script src="channels.js"></script>
	</head>
	<body>
		<header>
			<h1>Channels</h1>
			<h2>TV Remote</h2>
		</header>
		<div id="filters">
			<h3>Filters</h3>
		</div>
		<script>
			var categories = []
			var languages = []

			document.write("<ul>")
			for (var i = 0; i < channels.length; i++) {
				var channel = channels[i]

				document.write("<li data-filter='" + channel.language + "," + channel.category + "'><a href='http://localhost:8080/?buttons=" + commaify (channel.channel) + "'>" + channel.name + "</a></li>")

				// collect filter options as we are parsing the array
				categories = arrayUnique(categories.concat(channel.category))
				languages = arrayUnique(languages.concat(channel.language))
			}
			document.write("</ul>")

			document.getElementById("filters").innerHTML += "<h4>Categories</h4>"
			for (var i = 0; i < categories.length; i++) {
				var category = categories[i]

				document.getElementById("filters").innerHTML += category + "</br>"
			}

			document.getElementById("filters").innerHTML += "<h4>Language</h4>"
			for (var i = 0; i < languages.length; i++) {
				var language = languages[i]

				document.getElementById("filters").innerHTML += language + "</br>"
			}

			function commaify (channel_number) {
				channel_number_str = channel_number.toString()
				comma_channel_number_str = ""

				for (var i = 0; i < channel_number_str.length; i++) {
					comma_channel_number_str += channel_number_str.charAt(i) + (i < channel_number_str.length - 1 ? "," : "")
				}

				return comma_channel_number_str
			}

			function arrayUnique(array) {
			    var a = array.concat();
			    for(var i=0; i<a.length; ++i) {
			        for(var j=i+1; j<a.length; ++j) {
			            if(a[i] === a[j])
			                a.splice(j--, 1);
			        }
			    }

			    return a;
			}
		</script>
	</body>
</html>
